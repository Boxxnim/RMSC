# Machine Perfusion 체계적 문헌고찰 - 데이터 수집 계획

## 개요

LLM(Large Language Model) 기반 자동 데이터 추출 시스템을 활용하여 Machine Perfusion 관련 연구 논문에서 체계적으로 데이터를 수집합니다.

---

## 워크플로우

```
논문 PDF 수집 → LLM 자동 추출 → cohort_tracking.xlsx 업데이트 → 검토/승인
```

### 1단계: 논문 PDF 수집
- 검색 전략에 따라 논문 수집
- 본문 + Supplementary Material 함께 저장

### 2단계: LLM 자동 추출 (Gemini 3 Flash)
- PDF를 직접 분석하여 구조화된 데이터 추출
- 2단계 추출: (1) Full Extraction, (2) Risk of Bias

### 3단계: Cohort Tracking 자동 업데이트
- Study Registry에 연구 등록
- NCT ID 기반 중복 연구 자동 탐지
- Outcome Matrix 자동 생성

### 4단계: 수동 검토
- 추출 결과 검증
- 중복 연구 판정 및 적격성 결정

---

## 수집 데이터 항목

### Study Characteristics
| 항목 | 설명 |
|------|------|
| Study ID | 저자_연도 (예: vanRijn_2021) |
| 저자, 연도, 저널 | 기본 서지정보 |
| Study Design | RCT / Prospective / Retrospective |
| Centers | 참여 기관 리스트 |
| Enrollment Period | 등록 기간 (YYYY-MM ~ YYYY-MM) |
| NCT ID | Clinical Trial Registry ID |
| Intervention | HOPE / DHOPE / NMP / SNMP |
| Comparator | SCS (Static Cold Storage) |
| Donor Type | DCD / DBD / ECD-DBD / Mixed |
| Sample Size | 중재군/대조군/총 환자 수 |

### Outcomes (15개)
| 구분 | 항목 |
|------|------|
| **Binary** | EAD, NAS, TBC, ACR, PNF, HAT, Retx, RRT, AKI, PRS, Major Complications |
| **Survival** | 1yr Graft Survival, 1yr Patient Survival |
| **Continuous** | Hospital Stay, ICU Stay |

각 outcome에 대해:
- 보고 여부 (reported: true/false)
- 정의 (논문에서 사용한 기준)
- 이벤트 수 / 총 환자 수 (중재군/대조군)
- Effect estimates (RR, HR, 95% CI, p-value)
- Source location (Table/Figure 번호)

### Risk of Bias
- **RCT**: RoB 2 도구 (5개 도메인)
- **NRS**: ROBINS-I 도구 (7개 도메인)

---

## 중복 연구 관리

### 탐지 기준
- **NCT ID 매칭**: 동일 NCT → 확정 중복
- 수동 확인 필요 시 Cohort Linkage 시트에 기록

### Outcome Matrix
- 각 연구의 outcome 보고 여부를 일괄 관리
- `Include` / `N/A` / `Exclude (duplicate)` 등으로 표시

---

## 파일 구조

```
Info_extractor/
├── extractor_gemini.py      # 메인 추출 스크립트
├── cohort_tracking.xlsx     # 연구 관리 파일
│   ├── Study Registry       # 연구 등록
│   ├── Cohort Linkage       # 중복 관계
│   ├── Eligibility Log      # 포함/제외 기록
│   ├── Outcome Matrix       # Outcome 보고 현황
│   └── Change Log           # 변경 이력
└── extraction_results.xlsx  # 추출 데이터
```

---

## 실행 예시

```bash
python extractor_gemini.py \
  -i paper.pdf \
  -s supplementary.pdf \
  -o results.xlsx \
  --pdf-direct \
  --json \
  --update-tracking cohort_tracking.xlsx
```

---

## 검증된 예시 (vanRijn 2021, NEJM)

**추출 결과:**
- Centers: UMCG, Erasmus MC, LUMC 등 6개 기관
- Enrollment: 2016-01 ~ 2019-07
- NCT: NCT02584283
- 15개 outcome 모두 추출 (EAD 20/78 vs 31/78, NAS 5/78 vs 14/78 등)
- RoB2: Overall Low risk

---

*작성일: 2025-12-30*
